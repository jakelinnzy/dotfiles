- defaults:
    link:
        create: true
        relink: true

- clean: ['~', '~/.config', '~/.vim']

- create:
    - ~/repos
    - ~/.zfunc
    - ~/.local

- link:
    ~/.dotfiles: "" # This links ~/.dotfiles to this repo
    ~/.editorconfig: editorconfig
    ~/.clang-format: clang-format
    ~/.condarc: condarc
    # direnv
    ~/.config/direnv: direnv
    ~/.inputrc: inputrc
    # kitty
    ~/.config/kitty/kitty.conf: kitty/kitty.conf
    # i3
    ~/.config/i3:
        if: '[ $(uname) = Linux ]'
        path: i3
    ~/.config/ripgrep/ripgreprc: ripgrep/ripgreprc
    # zsh
    ~/.zshrc: zshrc
    ~/.config/zsh: zsh
    # git & github-cli
    ~/.gitconfig: git/gitconfig
    ~/.config/git/ignore: git/ignore
    ~/.config/gh: github-cli
    # vim
    ~/.config/nvim: nvim
    ~/.config/coc/UltiSnips: vim/snippets
    ~/.vim/autoload: vim/autoload
    ~/.vim/plugin: vim/plugin
    ~/.vim/spell: vim/spell
    ~/.vim/coc-settings.json: vim/coc-settings.json
    ~/.vim/tasks.ini: vim/tasks.ini
    ~/.vimrc: vimrc
    # doom-emacs
    ~/.doom.d: doom-emacs

- link:
    ~/.config/kitty/os.conf:
        if: '[ $(uname) = Darwin ]'
        path: kitty/macOS.conf

- link:
    ~/.config/kitty/os.conf:
        if: '[ $(uname) = Linux ]'
        path: kitty/linux.conf

- shell:
    - ['touch ~/.gitconfig_local
       ~/.config/kitty/local.conf
       ~/.vimrc_before ~/.vimrc_after ~/.vim/bookmarks
       ~/.zshrc_before ~/.zshrc_after', "Creating local files"]
    - ["git submodule update --init --recursive", "Installing submodules"]
    - ['[ -f ~/.local/antigen.sh ] ||
        curl -L git.io/antigen > ~/.local/antigen.zsh', "installing antigen"]
    - [
        'type nvim > /dev/null && nvim -es -u nvim/init.vim -i NONE -c
        "PlugInstall" -c "qa"',
        "Installing vim plugins"
      ]

# vim: expandtab shiftwidth=4 softtabstop=4
